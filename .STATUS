## Project: atlas
## Type: node-package
## Status: active
## Phase: ðŸš€ v0.4.0 - Released
## Priority: 1
## Progress: 100

## Focus: Card Stack UI + ADHD-friendly enhancements

## Quick Context
Atlas is the project state engine - a standalone Node.js package providing
Clean Architecture-based state management for developer workflows. Extracted
from flow-cli to create clear separation of concerns.

## Features
- **Project Registry**: Track projects, status, metadata
- **Session Tracking**: Work sessions with duration and notes
- **Quick Capture**: Ideas, tasks, bugs with triage workflow
- **Breadcrumb Trail**: Context markers for "where was I?"
- **Status Management**: .STATUS file integration
- **Multiple Storage**: Filesystem or SQLite backends
- **Rich CLI**: Interactive commands and TUI dashboard

## Architecture
```
atlas/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ domain/           # Entities, Value Objects, Events
â”‚   â”‚   â”œâ”€â”€ entities/     # Project, Session, Capture, Breadcrumb
â”‚   â”‚   â”œâ”€â”€ value-objects/# ProjectType, SessionState
â”‚   â”‚   â””â”€â”€ events/       # SessionEvent
â”‚   â”œâ”€â”€ use-cases/        # Business logic
â”‚   â”‚   â”œâ”€â”€ project/      # Scan, Register, List
â”‚   â”‚   â”œâ”€â”€ session/      # Create, End
â”‚   â”‚   â”œâ”€â”€ capture/      # CaptureIdea, Triage, GetInbox
â”‚   â”‚   â”œâ”€â”€ context/      # GetContext, LogBreadcrumb
â”‚   â”‚   â””â”€â”€ status/       # UpdateStatus
â”‚   â”œâ”€â”€ adapters/         # Infrastructure
â”‚   â”‚   â”œâ”€â”€ repositories/ # FileSystem + SQLite implementations
â”‚   â”‚   â””â”€â”€ Container.js  # Dependency injection
â”‚   â”œâ”€â”€ cli/              # CLI commands + dashboard
â”‚   â””â”€â”€ utils/            # Config, migration, caching
â”œâ”€â”€ bin/atlas             # Entry point
â”œâ”€â”€ completions/          # zsh, bash, fish
â””â”€â”€ test/                 # 718 tests
```

## CLI Commands
```bash
# Project management
atlas project add <path>   # Register project
atlas project list         # List all projects
atlas project show <name>  # Show project details
atlas project remove <name># Unregister project

# Status management
atlas status [project]     # Show/update status
atlas focus <project> [text]  # Get/set focus

# Session tracking
atlas session start [project]
atlas session end [note]
atlas session status

# Quick capture
atlas catch <text>         # Capture idea
atlas inbox               # View inbox
atlas inbox --triage      # Interactive triage

# Context
atlas where [project]     # Current context
atlas crumb <text>        # Leave breadcrumb
atlas trail [project]     # Show breadcrumbs

# Utilities
atlas sync                # Sync from .STATUS files
atlas migrate             # Migrate storage backend
atlas dashboard           # Interactive TUI
```

## Recent Progress
- [x] Extracted Clean Architecture from flow-cli
- [x] Added Capture and Breadcrumb entities (62 tests)
- [x] Created capture and context use-cases
- [x] CLI commands: project, session, catch, crumb, where, trail
- [x] SQLite repository option (29 tests)
- [x] SyncRegistryUseCase for .STATUS file integration
- [x] Migration tool (filesystem â†” SQLite)
- [x] UpdateStatusUseCase + CLI (41 tests)
- [x] Interactive triage mode (`atlas inbox --triage`)
- [x] Dashboard TUI (`atlas dashboard`)
- [x] Shell completions (zsh/bash/fish)
- [x] E2E tests (718 total tests passing)
- [x] Complete README documentation
- [x] GitHub repo: github.com/Data-Wise/atlas
- [x] Homebrew formula: `brew install Data-Wise/tap/atlas`
- [x] v0.1.0 tagged and released
- [x] v0.3.1: Themes, focus mode, Pomodoro timer, decision helper
- [x] State machine refactor for reliable view transitions
- [x] Timer manager for centralized Pomodoro handling
- [x] Card Stack layout replacing table view
- [x] Enhanced cards with progress bars, next actions
- [x] Zen mode for minimal distraction
- [x] Contextual command bar

## Current Tasks
- [x] Finalize Card Stack polish
- [x] Fix dashboard corruption from broken commit
- [x] Add Ghostty terminal canvas fallback
- [ ] Publish v0.4.0 to npm (requires OTP)
- [x] Update Homebrew formula to 0.4.0

## Next Tasks (v0.4.x)
- [ ] Streak tracking and display
- [ ] Celebration animations on session end
- [ ] Context restoration ("Last time you were...")
- [ ] "Good enough" session end option
- [ ] Time blindness helper (gentle time cues)

## Future Enhancements (v0.5.0+)
- [ ] Configuration system (~/.atlas/config.json)
- [ ] User preferences persistence
- [ ] Project templates (init --template node/r-package)
- [ ] "Park" feature for context switching
- [ ] Remote sync (GitHub/GitLab status)
- [ ] Web dashboard with real-time sync
- [ ] Session analytics and reports
- [ ] VS Code extension for .STATUS editing

## Blockers
None

## Test Stats
- Unit Tests: 400+
- Integration Tests: 250+
- E2E Tests: 41
- Total: 718 passing

## Installation
```bash
# npm (recommended)
npm install -g @data-wise/atlas

# Homebrew
brew install Data-Wise/tap/atlas

# From source
git clone https://github.com/Data-Wise/atlas
cd atlas && npm install && npm link
```

## Integration with flow-cli
Atlas is consumed by flow-cli through `lib/atlas-bridge.zsh`:
```zsh
# flow-cli automatically uses atlas when available
_flow_has_atlas && _flow_atlas session start "$project"
```

## Links
- GitHub: https://github.com/Data-Wise/atlas
- Homebrew: `brew install Data-Wise/tap/atlas`
- npm: `npm install -g @data-wise/atlas`
- flow-cli: ~/projects/dev-tools/flow-cli

## Session Log
- 2025-12-25: Card Stack layout with enhanced project cards
- 2025-12-25: State machine + timer manager refactor
- 2025-12-25: Zen mode, focus mode, decision helper
- 2025-12-25: Theme cycling, Pomodoro stats
- 2025-12-25: Dashboard v0.3.1 with ADHD features
- 2025-12-25: Homebrew formula added
- 2025-12-25: GitHub repo created, v0.1.0 tagged
- 2025-12-25: E2E tests, README, npm packaging (718 tests)
- 2025-12-25: Shell completions (zsh/bash/fish)
- 2025-12-25: Dashboard TUI with blessed-contrib
- 2025-12-25: Interactive inbox triage
- 2025-12-25: UpdateStatusUseCase (41 tests)
- 2025-12-25: CLI enhancements (--storage, migrate, watch)
- 2025-12-25: SyncRegistryUseCase for .STATUS integration
- 2025-12-25: SQLite storage backend (29 tests)
- 2025-12-25: Added Capture/Breadcrumb entities (62 tests)
- 2025-12-25: Initial extraction from flow-cli
